{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/Food Waste management/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/Food Waste management/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hp/Desktop/Food Waste management/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./AdminDisplay.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminDisplay(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),foodItems=_useState2[0],setFoodItems=_useState2[1];useEffect(function(){fetchData();},[]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,dataArray;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('https://meal-rescue-india-default-rtdb.firebaseio.com/Fooddata.json');case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;// Convert data to an array using Object.values\ndataArray=Array.isArray(data)?data:Object.values(data);setFoodItems(dataArray);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error('Error fetching data',_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();var deleteItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(itemId){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"https://meal-rescue-india-default-rtdb.firebaseio.com/Fooddata/\".concat(itemId,\".json\"),{method:'DELETE'});case 3:response=_context2.sent;if(response.ok){console.log('Item deleted successfully');}else{console.error('Failed to delete item');}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('Error deleting item',_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function deleteItem(_x){return _ref2.apply(this,arguments);};}();var handleDecline=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(itemId){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deleteItem(itemId);case 2:// Update the state to exclude the deleted item\nsetFoodItems(function(prevItems){return prevItems.filter(function(item){return item.key!==itemId;});});case 3:case\"end\":return _context3.stop();}},_callee3);}));return function handleDecline(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:foodItems.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"output\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:/*#__PURE__*/_jsx(\"h1\",{children:item.food})}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:/*#__PURE__*/_jsx(\"h1\",{children:item.manufacturingDate})}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:/*#__PURE__*/_jsx(\"h1\",{children:item.expiry})}),/*#__PURE__*/_jsx(\"div\",{className:\"list\",children:/*#__PURE__*/_jsx(\"h1\",{children:item.location})}),/*#__PURE__*/_jsx(\"button\",{// Add a unique key prop here\n// onClick={() => { handleDecline(item.key); }}\nclassName:\"button-68\",role:\"button\",style:{backgroundColor:'#C20114'},children:\"Decline\"},\"decline-\".concat(item.key)),/*#__PURE__*/_jsx(\"button\",{// Add a unique key prop here\nclassName:\"button-68\",role:\"button\",style:{backgroundColor:'#4DA167'},children:\"Accept\"},\"accept-\".concat(item.key))]},item.key);})});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","AdminDisplay","_useState","_useState2","_slicedToArray","foodItems","setFoodItems","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","dataArray","wrap","_callee$","_context","prev","next","fetch","sent","json","Array","isArray","Object","values","t0","console","error","stop","apply","arguments","deleteItem","_ref2","_callee2","itemId","_callee2$","_context2","concat","method","ok","log","_x","handleDecline","_ref3","_callee3","_callee3$","_context3","prevItems","filter","item","key","_x2","children","map","className","food","manufacturingDate","expiry","location","role","style","backgroundColor"],"sources":["C:/Users/hp/Desktop/Food Waste management/src/Frontpage/AdminDisplay.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './AdminDisplay.css';\r\n\r\nexport default function AdminDisplay() {\r\n  const [foodItems, setFoodItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch('https://meal-rescue-india-default-rtdb.firebaseio.com/Fooddata.json');\r\n      const data = await response.json();\r\n\r\n      // Convert data to an array using Object.values\r\n      const dataArray = Array.isArray(data) ? data : Object.values(data);\r\n\r\n      setFoodItems(dataArray);\r\n    } catch (error) {\r\n      console.error('Error fetching data', error);\r\n    }\r\n  };\r\n\r\n  const deleteItem = async (itemId) => {\r\n    try {\r\n      const response = await fetch(`https://meal-rescue-india-default-rtdb.firebaseio.com/Fooddata/${itemId}.json`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (response.ok) {\r\n        console.log('Item deleted successfully');\r\n      } else {\r\n        console.error('Failed to delete item');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting item', error);\r\n    }\r\n  };\r\n\r\n  const handleDecline = async (itemId) => {\r\n    // Call the deleteItem function to delete the item from the database\r\n    await deleteItem(itemId);\r\n\r\n    // Update the state to exclude the deleted item\r\n    setFoodItems((prevItems) => prevItems.filter((item) => item.key !== itemId));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {foodItems.map((item) => (\r\n        <div className='output' key={item.key}>\r\n          <div className='list'>\r\n            <h1>{item.food}</h1>\r\n          </div>\r\n          <div className='list'>\r\n            <h1>{item.manufacturingDate}</h1>\r\n          </div>\r\n          <div className='list'>\r\n            <h1>{item.expiry}</h1>\r\n          </div>\r\n          <div className='list'>\r\n            <h1>{item.location}</h1>\r\n          </div>\r\n          <button\r\n            key={`decline-${item.key}`} // Add a unique key prop here\r\n            // onClick={() => { handleDecline(item.key); }}\r\n            className='button-68'\r\n            role='button'\r\n            style={{ backgroundColor: '#C20114' }}\r\n          >\r\n            Decline\r\n          </button>\r\n          <button\r\n            key={`accept-${item.key}`} // Add a unique key prop here\r\n            className='button-68'\r\n            role='button'\r\n            style={{ backgroundColor: '#4DA167' }}\r\n          >\r\n            Accept\r\n          </button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}